{{- /* 顶部导航：读取 [menu.main]，用 JS 注入，不改主题源码 */ -}}
<script>
document.addEventListener('DOMContentLoaded', function () {
  var items = [
    {{- $items := site.Menus.main -}}
    {{- range $i, $e := $items -}}
    { name: {{ printf "%q" .Name }}, url: "{{ .URL | relURL }}" }{{ if lt (add $i 1) (len $items) }},{{ end }}
    {{- end -}}
  ];
  if (!items.length) return;

  var bar = document.createElement('nav');
  bar.className = 'top-nav';
  var ul = document.createElement('ul');

  items.forEach(function (it) {
    var li = document.createElement('li');
    var a = document.createElement('a');
    a.href = it.url;
    a.textContent = it.name;
    li.appendChild(a);
    ul.appendChild(li);
  });

  bar.appendChild(ul);

  // 插在主题自带 topbar 之后；找不到就放到 body 顶部
  var anchor = document.getElementById('R-topbar') || document.body.firstElementChild;
  if (anchor && anchor.parentNode) {
    anchor.parentNode.insertBefore(bar, anchor.nextSibling);
  } else {
    document.body.insertBefore(bar, document.body.firstChild);
  }
});
</script>

<style>
/* 顶部导航的样式 */
.top-nav {
  position: sticky;
  top: 0;
  z-index: 1000;
  background: rgba(255,255,255,0.85);
  backdrop-filter: blur(8px);
  padding: 10px 0;
  border-bottom: 1px solid rgba(0,0,0,0.08);
}
html[data-r-theme-variant="dark"] .top-nav {
  background: rgba(22,22,22,0.7);
  border-bottom-color: rgba(255,255,255,0.08);
}
.top-nav ul {
  list-style: none;
  margin: 0 auto;
  padding: 0 16px;
  display: flex;
  gap: 1.25rem;
  flex-wrap: wrap;
  max-width: 1200px;
}
.top-nav a {
  text-decoration: none;
  font-weight: 550;
  line-height: 1;
  padding: 6px 4px;
  color: inherit;
  opacity: 0.9;
  transition: opacity .2s ease, transform .15s ease;
}
.top-nav a:hover { opacity: 1; transform: translateY(-1px); }
</style>